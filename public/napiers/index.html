<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Cost & Voice AI Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; flex-wrap: wrap; gap: 20px;">
                <div style="display: flex; align-items: center; gap: 20px;">
                    <div class="chakra-logo">
                        <svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="30" cy="30" r="28" fill="none" stroke="white" stroke-width="2"/>
                            <g id="chakra-spokes">
                                <path d="M30 2 L32 12 L30 15 L28 12 Z" fill="white"/>
                                <path d="M58 30 L48 32 L45 30 L48 28 Z" fill="white" transform="rotate(45 30 30)"/>
                                <path d="M30 58 L32 48 L30 45 L28 48 Z" fill="white" transform="rotate(90 30 30)"/>
                                <path d="M2 30 L12 28 L15 30 L12 32 Z" fill="white" transform="rotate(135 30 30)"/>
                                <path d="M30 2 L32 12 L30 15 L28 12 Z" fill="white" transform="rotate(180 30 30)"/>
                                <path d="M58 30 L48 32 L45 30 L48 28 Z" fill="white" transform="rotate(225 30 30)"/>
                                <path d="M30 58 L32 48 L30 45 L28 48 Z" fill="white" transform="rotate(270 30 30)"/>
                                <path d="M2 30 L12 28 L15 30 L12 32 Z" fill="white" transform="rotate(315 30 30)"/>
                                <circle cx="30" cy="30" r="12" fill="none" stroke="white" stroke-width="1.5"/>
                            </g>
                        </svg>
                    </div>
                    <div>
                        <h1 style="margin: 0;">NAPIERS</h1>
                        <p class="subtitle" style="margin-top: 4px;">Calculate costs, latency, and optimize your AI usage</p>
                    </div>
                </div>
                <div style="text-align: right; display: flex; flex-direction: column; align-items: flex-end; gap: 8px;">
                    <button class="btn" onclick="switchToTab('documentation')" style="font-size: 10px; padding: 8px 16px;">Documentation</button>
                    <p style="font-size: 11px; color: var(--gray-500); font-style: italic; letter-spacing: 0.5px;">crafted by webhavvv</p>
                    <div style="display: flex; gap: 12px; justify-content: flex-end;">
                        <a href="https://github.com/webhavv" target="_blank" rel="noopener noreferrer" style="color: var(--gray-500); transition: color 0.2s;" onmouseover="this.style.color='#fff'" onmouseout="this.style.color='var(--gray-500)'">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                        </a>
                        <a href="https://www.linkedin.com/in/vaibhav-sharma-9305b7232/" target="_blank" rel="noopener noreferrer" style="color: var(--gray-500); transition: color 0.2s;" onmouseover="this.style.color='#fff'" onmouseout="this.style.color='var(--gray-500)'">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="calculator">Cost Calculator</button>
            <button class="tab-btn" data-tab="popular-models">Latency Calculator</button>
            <button class="tab-btn" data-tab="batch">Batch</button>
            <button class="tab-btn" data-tab="voice">Voice AI</button>
            <button class="tab-btn" data-tab="explorer">Explorer</button>
            <button class="tab-btn" data-tab="compare">Compare</button>
            <button class="tab-btn" data-tab="optimizer">Optimizer</button>
            <button class="tab-btn" data-tab="statistics">Statistics</button>
            <button class="tab-btn" data-tab="favorites">Favorites</button>
            <button class="tab-btn" data-tab="documentation">Documentation</button>
        </div>

        <!-- Model Explorer Tab -->
        <div id="explorer" class="tab-content">
            <div style="max-width: 1200px; margin: 0 auto;">
                <div class="section-header" style="text-align: center;">
                    <h2>Model Explorer</h2>
                    <p>Browse and filter through 2,000+ AI models across all providers. Search by name, type, features, or price to find the perfect model for your use case. Export your findings as CSV or JSON.</p>
                </div>
                
                <div class="search-filters">
                    <div class="search-box">
                        <input type="text" id="modelSearch" placeholder="Search models by name or provider...">
                    </div>
                    <div class="filters" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                        <div class="input-group">
                            <label style="margin-bottom: 8px;">Provider</label>
                            <select id="providerFilter">
                                <option value="">Select Provider...</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label style="margin-bottom: 8px;">Model Type</label>
                            <select id="typeFilter">
                                <option value="">Select Type...</option>
                                <option value="chat">Chat</option>
                                <option value="text">Text</option>
                                <option value="embedding">Embedding</option>
                                <option value="image">Image</option>
                                <option value="audio">Audio</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label style="margin-bottom: 8px;">Features</label>
                            <select id="featureFilter">
                                <option value="">Select Feature...</option>
                                <option value="tools">Tools</option>
                                <option value="image">Image Support</option>
                                <option value="cache_control">Cache Control</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label style="margin-bottom: 8px;">Max Price ($/1B tokens) - Note: Input/Output tokens are in BILLIONS</label>
                            <input type="number" id="maxPriceFilter" placeholder="Enter max price..." step="0.001" min="0">
                        </div>
                    </div>
                </div>
                
                <div class="stats-bar" style="margin-top: 20px;">
                    <span id="modelCount" style="font-weight: 600;">Select filters to view models</span>
                    <div class="stats-actions">
                        <button class="btn" onclick="exportModels('csv')" id="exportCSVBtn" disabled>Export CSV</button>
                        <button class="btn" onclick="exportModels('json')" id="exportJSONBtn" disabled>Export JSON</button>
                        <button class="btn btn-secondary" onclick="clearFilters()">Clear All Filters</button>
                    </div>
                </div>
                
                <div id="modelsGrid" class="models-grid" style="min-height: 400px;">
                    <div class="placeholder" style="padding: 80px 20px;">
                        <div style="font-size: 16px; margin-bottom: 12px; font-weight: 600;">No models displayed</div>
                        <div style="font-size: 12px; color: var(--white);">Please select at least one filter above to explore models</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Latency Calculator Tab -->
        <div id="popular-models" class="tab-content">
            <div class="section-header">
                <h2>Latency Calculator</h2>
                <p>Estimate response times for popular LLM models. Understand Time to First Token (TTFT), output speed, and total request latency to optimize your application's user experience.</p>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                <!-- Left: Model Selection & Input -->
                <div>
                    <div class="model-detail-section" style="margin-bottom: 20px;">
                        <h3>Select Popular Model</h3>
                        <div class="input-group">
                            <label>Model</label>
                            <select id="popularModelSelect">
                                <option value="">Select a popular model...</option>
                            </select>
                        </div>
                        <div id="popularModelInfo" style="margin-top: 16px; padding: 16px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px; display: none;">
                            <div style="font-size: 11px; color: var(--gray-500); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 12px;">Model Specifications</div>
                            <div id="popularModelSpecs"></div>
                        </div>
                    </div>
                    
                    <div class="model-detail-section" style="margin-bottom: 20px;">
                        <h3>Usage Parameters</h3>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Input Tokens (in billions)</label>
                                <input type="number" id="popularInputTokens" value="0.000001" min="0" step="0.000001">
                                <div style="font-size: 10px; color: var(--gray-500); margin-top: 4px;">0.000001 = 1,000 tokens</div>
                            </div>
                            <div class="input-group">
                                <label>Output Tokens (in billions)</label>
                                <input type="number" id="popularOutputTokens" value="0.0000005" min="0" step="0.0000001">
                                <div style="font-size: 10px; color: var(--gray-500); margin-top: 4px;">0.0000005 = 500 tokens</div>
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Number of Requests</label>
                                <input type="number" id="popularNumRequests" value="1" min="1">
                            </div>
                            <div class="input-group">
                                <label>Streaming Mode</label>
                                <select id="popularStreamingMode">
                                    <option value="true">Enabled (Recommended)</option>
                                    <option value="false">Disabled</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="model-detail-section">
                        <h3>Network Settings</h3>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Network Latency (ms)</label>
                                <input type="number" id="popularNetworkLatency" value="50" min="0" step="10">
                                <div style="font-size: 10px; color: var(--gray-500); margin-top: 4px;">One-way latency to API</div>
                            </div>
                            <div class="input-group">
                                <label>Region</label>
                                <select id="popularRegion">
                                    <option value="us">US (50ms)</option>
                                    <option value="eu">Europe (80ms)</option>
                                    <option value="asia">Asia (120ms)</option>
                                    <option value="custom">Custom</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Right: Results -->
                <div>
                    <div class="calc-result" style="margin-bottom: 20px;">
                        <div class="cost-breakdown">
                            <h3>Cost Analysis</h3>
                            <div id="popularCostDetails"></div>
                            <div class="total-cost">
                                <span class="label">Total Cost</span>
                                <span id="popularTotalCost" class="amount">$0.00</span>
                            </div>
                            <div class="total-cost" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--white);">
                                <span class="label">Per Request</span>
                                <span id="popularPerRequestCost" class="amount" style="font-size: 20px;">$0.00</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calc-result">
                        <div class="cost-breakdown">
                            <h3>Latency Analysis</h3>
                            <div id="popularLatencyDetails"></div>
                            <div class="total-cost">
                                <span class="label">Total Latency</span>
                                <span id="popularTotalLatency" class="amount">0 ms</span>
                            </div>
                            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-subtle);">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                                    <div>
                                        <div style="font-size: 10px; color: var(--gray-500); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 6px;">Time to First Token</div>
                                        <div id="popularTTFT" style="font-size: 18px; font-weight: 700; font-family: 'IBM Plex Mono', monospace;">0 ms</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 10px; color: var(--gray-500); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 6px;">Output Speed</div>
                                        <div id="popularOutputSpeed" style="font-size: 18px; font-weight: 700; font-family: 'IBM Plex Mono', monospace;">0 tok/s</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>

        <!-- Cost Calculator Tab -->
        <div id="calculator" class="tab-content active">
            <div class="section-header">
                <h2>Cost Calculator</h2>
                <p>Calculate precise API costs for any LLM model. Input your token usage, cache settings, and additional features to get accurate cost breakdowns.</p>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                <!-- Left: Inputs -->
                <div>
                    <div class="model-detail-section" style="margin-bottom: 20px;">
                        <h3>Model & Usage</h3>
                        <div class="input-group">
                            <label>Model</label>
                            <select id="calcModelSelect">
                                <option value="">Select model...</option>
                            </select>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Input Tokens (in billions)</label>
                                <input type="number" id="inputTokens" value="0.000001" min="0" step="0.000001">
                                <div style="font-size: 10px; color: var(--gray-500); margin-top: 4px;">0.000001 = 1,000 tokens</div>
                            </div>
                            <div class="input-group">
                                <label>Output Tokens (in billions)</label>
                                <input type="number" id="outputTokens" value="0.0000005" min="0" step="0.0000001">
                                <div style="font-size: 10px; color: var(--gray-500); margin-top: 4px;">0.0000005 = 500 tokens</div>
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Cache Read (in billions)</label>
                                <input type="number" id="cacheReadTokens" value="0" min="0" step="0.000001">
                            </div>
                            <div class="input-group">
                                <label>Cache Write (in billions)</label>
                                <input type="number" id="cacheWriteTokens" value="0" min="0" step="0.000001">
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Web Searches</label>
                                <input type="number" id="webSearches" value="0" min="0">
                            </div>
                            <div class="input-group">
                                <label>File Searches</label>
                                <input type="number" id="fileSearches" value="0" min="0">
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Thinking Tokens</label>
                                <input type="number" id="thinkingTokens" value="0" min="0">
                            </div>
                            <div class="input-group">
                                <label>Requests</label>
                                <input type="number" id="numRequests" value="1" min="1">
                            </div>
                        </div>
                    </div>
                    <!-- Hidden inputs for latency calculations (kept for compatibility) -->
                    <input type="hidden" id="networkLatency" value="50">
                    <input type="hidden" id="processingSpeed" value="100">
                    <input type="hidden" id="enableStreaming" checked>
                </div>
                <!-- Right: Results -->
                <div>
                    <div class="calc-result" style="margin-bottom: 20px;">
                        <div class="cost-breakdown">
                            <h3>Cost Breakdown</h3>
                            <div id="costDetails"></div>
                            <div class="total-cost">
                                <span class="label">Total</span>
                                <span id="totalCost" class="amount">$0.00</span>
                            </div>
                            <div class="total-cost" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--white);">
                                <span class="label">Per Request</span>
                                <span id="perRequestCost" class="amount" style="font-size: 20px;">$0.00</span>
                            </div>
                        </div>
                    </div>
                    <!-- Hidden elements for latency (kept for compatibility) -->
                    <div style="display: none;">
                        <span id="estimatedLatency">0 ms</span>
                        <span id="latencyStatus">-</span>
                        <div id="latencyBreakdownCalc"></div>
                    </div>
                    <div style="margin-top: 20px; display: flex; gap: 12px;">
                        <button class="btn" onclick="exportCalculation('csv')">Export CSV</button>
                        <button class="btn" onclick="exportCalculation('json')">Export JSON</button>
                        <button class="btn btn-secondary" onclick="simulateRequest()">Simulate Request</button>
                    </div>
                </div>
            </div>
            <!-- Interactive Charts Section -->
            <div class="model-detail-section" style="margin-top: 40px;">
                <h3>Visualizations</h3>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                    <div style="border: 1px solid var(--white); padding: 20px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Cost Distribution</h4>
                        <div id="costChart" style="height: 200px; display: flex; align-items: center; justify-content: center; color: var(--white);">
                            <div style="text-align: center;">Enter values to see chart</div>
                        </div>
                    </div>
                    <div style="border: 1px solid var(--white); padding: 20px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Token Usage</h4>
                        <div id="tokenChart" style="height: 200px; display: flex; align-items: center; justify-content: center; color: var(--white);">
                            <div style="text-align: center;">Enter values to see chart</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Batch Calculator Tab -->
        <div id="batch" class="tab-content">
            <div class="section-header">
                <h2>Batch Calculator</h2>
                <p>Calculate costs for multiple models or requests at once. Input a JSON array of usage scenarios to get aggregate cost analysis. Ideal for comparing multi-model workflows or projecting monthly expenses.</p>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                <div>
                    <div class="model-detail-section" style="margin-bottom: 20px;">
                        <h3>Batch Input</h3>
                        <div class="input-group">
                            <label>JSON Array of Requests</label>
                            <div class="batch-input">
                                <textarea id="batchInput" placeholder='[{"model": "openai:gpt-4o", "input": 1, "output": 0.5}, {"model": "anthropic:claude-3-5-sonnet-20241022", "input": 2, "output": 1}]'></textarea>
                            </div>
                            <div style="font-size: 11px; color: var(--white); margin-top: 8px;">
                                Enter an array of objects with: model (provider:name), input (tokens in billions), output (tokens in billions)
                            </div>
                        </div>
                        <button class="btn btn-secondary" onclick="calculateBatch()" style="width: 100%; margin-top: 10px;">Calculate Batch</button>
                    </div>
                    <div class="model-detail-section">
                        <h3>Quick Templates</h3>
                        <div style="display: flex; flex-direction: column; gap: 8px;">
                            <button class="btn" onclick="loadBatchTemplate('comparison')" style="text-align: left; text-transform: none;">Compare 3 Popular Models</button>
                            <button class="btn" onclick="loadBatchTemplate('monthly')" style="text-align: left; text-transform: none;">Monthly Usage Estimate</button>
                            <button class="btn" onclick="loadBatchTemplate('scenario')" style="text-align: left; text-transform: none;">Cost Scenario Analysis</button>
                        </div>
                    </div>
                </div>
                <div>
                    <div id="batchResults" class="batch-results">
                        <div class="placeholder" style="padding: 80px 20px;">
                            <div style="font-size: 16px; margin-bottom: 12px; font-weight: 600;">No batch calculation yet</div>
                            <div style="font-size: 12px; color: var(--white);">Enter JSON array and click Calculate Batch</div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="batchCharts" style="display: none; margin-top: 40px;">
                <div class="model-detail-section">
                    <h3>Visualizations</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <div style="border: 1px solid var(--white); padding: 20px;">
                            <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Cost Distribution</h4>
                            <div id="batchCostChart" style="height: 300px;"></div>
                        </div>
                        <div style="border: 1px solid var(--white); padding: 20px;">
                            <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Model Comparison</h4>
                            <div id="batchModelChart" style="height: 300px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Compare Models Tab -->
        <div id="compare" class="tab-content">
            <div class="section-header">
                <h2>Compare Models</h2>
                <p>Head-to-head comparison of any two LLM models. Analyze cost differences, latency trade-offs, and feature gaps to make informed decisions about model selection for your projects.</p>
            </div>
            
            <!-- Model Selection Row -->
            <div class="model-detail-section" style="margin-bottom: 30px;">
                <h3>Select Models to Compare</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                    <div class="input-group">
                        <label>Model 1</label>
                        <select id="compareModel1" style="width: 100%;">
                            <option value="">Select first model...</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Model 2</label>
                        <select id="compareModel2" style="width: 100%;">
                            <option value="">Select second model...</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Test Parameters -->
            <div class="model-detail-section" style="margin-bottom: 30px;">
                <h3>Test Parameters</h3>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                    <div class="input-group">
                        <label>Input Tokens (billions)</label>
                        <input type="number" id="compareInputTokens" value="0.000001" min="0" step="0.000001">
                    </div>
                    <div class="input-group">
                        <label>Output Tokens (billions)</label>
                        <input type="number" id="compareOutputTokens" value="0.0000005" min="0" step="0.0000001">
                    </div>
                    <div class="input-group">
                        <label>Number of Requests</label>
                        <input type="number" id="compareNumRequests" value="100" min="1">
                    </div>
                    <div class="input-group">
                        <label>Processing Speed (tok/s)</label>
                        <input type="number" id="compareProcessingSpeed" value="100" min="1" step="10">
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="compareModels()" style="margin-top: 20px;">Compare Models</button>
            </div>
            
            <!-- Comparison Results -->
            <div id="comparisonResult" class="comparison-result" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; min-height: 300px;">
                <div class="placeholder" style="grid-column: span 2; padding: 80px 20px; text-align: center;">
                    <div style="font-size: 16px; margin-bottom: 12px; font-weight: 600;">Select two models to compare</div>
                    <div style="font-size: 12px; color: var(--gray-500);">Choose models from the dropdowns above</div>
                </div>
            </div>
            <div id="comparisonCharts" style="display: none; margin-top: 40px;">
                <div class="model-detail-section">
                    <h3>Visual Comparison</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <div style="border: 1px solid var(--white); padding: 20px;">
                            <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Cost Comparison</h4>
                            <div id="compareCostChart" style="height: 200px;"></div>
                        </div>
                        <div style="border: 1px solid var(--white); padding: 20px;">
                            <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Latency Comparison</h4>
                            <div id="compareLatencyChart" style="height: 200px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Tab -->
        <div id="statistics" class="tab-content">
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <h3>Total Models</h3>
                    <div class="stat-value" id="statTotalModels">0</div>
                    <div class="stat-label">across all providers</div>
                </div>
                <div class="stat-card">
                    <h3>Providers</h3>
                    <div class="stat-value" id="statProviders">0</div>
                    <div class="stat-label">different providers</div>
                </div>
                <div class="stat-card">
                    <h3>Avg Input Price</h3>
                    <div class="stat-value" id="statAvgInput">$0.00</div>
                    <div class="stat-label">per 1 billion tokens</div>
                </div>
                <div class="stat-card">
                    <h3>Avg Output Price</h3>
                    <div class="stat-value" id="statAvgOutput">$0.00</div>
                    <div class="stat-label">per 1 billion tokens</div>
                </div>
                <div class="stat-card">
                    <h3>Cheapest Model</h3>
                    <div class="stat-value" id="statCheapest" style="font-size: 18px;">-</div>
                    <div class="stat-label" id="statCheapestPrice">$0.00/1K</div>
                </div>
                <div class="stat-card">
                    <h3>Most Expensive</h3>
                    <div class="stat-value" id="statExpensive" style="font-size: 18px;">-</div>
                    <div class="stat-label" id="statExpensivePrice">$0.00/1K</div>
                </div>
            </div>
            <div class="model-detail">
                <h3 style="margin-bottom: 20px; font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Provider Breakdown</h3>
                <table class="data-table" id="providerTable">
                    <thead>
                        <tr>
                            <th>Provider</th>
                            <th>Models</th>
                            <th>Avg Input ($/1M)</th>
                            <th>Avg Output ($/1M)</th>
                            <th>Types</th>
                        </tr>
                    </thead>
                    <tbody id="providerTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Favorites Tab -->
        <div id="favorites" class="tab-content">
            <div class="section-header">
                <h2>Favorites</h2>
                <p>Your saved models for quick access. Star any model from the Explorer or other tabs to add it here. Export your favorites list or clear selections to start fresh.</p>
            </div>
            <div class="stats-bar">
                <span id="favoritesCount">0 favorites</span>
                <div class="stats-actions">
                    <button class="btn" onclick="clearFavorites()">Clear All</button>
                    <button class="btn" onclick="exportFavorites()">Export</button>
                </div>
            </div>
            <div id="favoritesGrid" class="models-grid">
                <p class="placeholder">No favorites yet. Click the star icon on any model to add it.</p>
            </div>
        </div>

        <!-- Optimizer Tab -->
        <div id="optimizer" class="tab-content">
            <div class="section-header">
                <h2>Model Optimizer</h2>
                <p>Find the best model for your specific needs. Input your use case, expected token volumes, budget constraints, and required featuresâ€”get personalized recommendations with cost savings analysis.</p>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                <div>
                    <div class="model-detail-section" style="margin-bottom: 20px;">
                        <h3>Optimization Criteria</h3>
                        <div class="input-group">
                            <label>Use Case</label>
                            <select id="useCaseSelect">
                                <option value="">Select use case...</option>
                                <option value="chat">General Chat</option>
                                <option value="code">Code Generation</option>
                                <option value="analysis">Data Analysis</option>
                                <option value="embedding">Embeddings</option>
                                <option value="image">Image Processing</option>
                                <option value="long">Long Context</option>
                                <option value="cheap">Cost Sensitive</option>
                            </select>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Expected Input Tokens (in billions)</label>
                                <input type="number" id="optInputTokens" value="0.01" min="0" step="0.001">
                                <div style="font-size: 10px; color: var(--gray-500); margin-top: 4px;">Enter tokens in billions (0.01 = 10M monthly)</div>
                            </div>
                            <div class="input-group">
                                <label>Expected Output Tokens (in billions)</label>
                                <input type="number" id="optOutputTokens" value="0.005" min="0" step="0.001">
                                <div style="font-size: 10px; color: var(--gray-500); margin-top: 4px;">Enter tokens in billions (0.005 = 5M monthly)</div>
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Monthly Requests</label>
                                <input type="number" id="optMonthlyRequests" value="10000" min="0">
                            </div>
                            <div class="input-group">
                                <label>Max Budget ($)</label>
                                <input type="number" id="optMaxBudget" value="100" min="0" step="0.01">
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Required Features</label>
                            <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 8px;">
                                <label style="display: flex; align-items: center; gap: 6px; font-weight: 400; text-transform: none; cursor: pointer;">
                                    <input type="checkbox" id="optFeatureTools" style="width: auto;">
                                    Tools
                                </label>
                                <label style="display: flex; align-items: center; gap: 6px; font-weight: 400; text-transform: none; cursor: pointer;">
                                    <input type="checkbox" id="optFeatureImage" style="width: auto;">
                                    Image
                                </label>
                                <label style="display: flex; align-items: center; gap: 6px; font-weight: 400; text-transform: none; cursor: pointer;">
                                    <input type="checkbox" id="optFeatureCache" style="width: auto;">
                                    Cache
                                </label>
                            </div>
                        </div>
                        <button class="btn btn-secondary" onclick="optimizeModel()" style="margin-top: 10px; width: 100%;">Find Optimal Model</button>
                    </div>
                </div>
                <div>
                    <div class="calc-result">
                        <div class="cost-breakdown">
                            <h3>Top Recommendations</h3>
                            <div id="optimizerResults">
                                <div class="placeholder" style="padding: 40px; text-align: center;">
                                    <div style="font-size: 14px; margin-bottom: 8px;">Enter criteria and click "Find Optimal Model"</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="optimizerCharts" style="display: none; margin-top: 40px;">
                <div class="model-detail-section">
                    <h3>Visual Comparison</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <div style="border: 1px solid var(--white); padding: 20px;">
                            <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Cost Comparison</h4>
                            <div id="optimizerCostChart" style="height: 300px;"></div>
                        </div>
                        <div style="border: 1px solid var(--white); padding: 20px;">
                            <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Savings Potential</h4>
                            <div id="optimizerSavingsChart" style="height: 300px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Voice AI Calculator Tab -->
        <div id="voice" class="tab-content">
            <div class="section-header">
                <h2>Voice AI</h2>
                <p>Calculate costs and learn about building voice AI applications.</p>
            </div>
            
            <!-- Sub-tabs for Voice AI -->
            <div style="display: flex; gap: 8px; margin-bottom: 24px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 16px;">
                <button class="btn btn-secondary" onclick="showVoiceSection('calculator')" id="voice-calc-btn" style="font-size: 10px; padding: 8px 16px;">Calculator</button>
                <button class="btn" onclick="showVoiceSection('guide')" id="voice-guide-btn" style="font-size: 10px; padding: 8px 16px;">Guide</button>
            </div>
            
            <!-- Voice Calculator Section -->
            <div id="voice-calc-section">
            <div class="section-header" style="margin-bottom: 20px;">
                <h3>Voice AI Calculator</h3>
                <p>Calculate end-to-end costs for voice AI applications. Includes Speech-to-Text (STT), LLM processing, Text-to-Speech (TTS), and infrastructure costs. Get complete latency breakdowns for real-time voice experiences.</p>
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                <!-- Left: Inputs -->
                <div>
                    <div class="model-detail-section" style="margin-bottom: 20px;">
                        <h3>API Providers & Costs</h3>
                        <div class="input-group">
                            <label>LLM Provider</label>
                            <select id="voiceLLMProvider">
                                <option value="">Loading models...</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>STT Provider</label>
                            <select id="voiceSTTProvider">
                                <optgroup label="Recommended for Voice AI">
                                    <option value="deepgram:nova-2">Deepgram Nova-2 (~150ms TTFT, $0.0043/min)</option>
                                    <option value="gladia:enhanced">Gladia Enhanced (100+ languages, $0.0066/min)</option>
                                </optgroup>
                                <optgroup label="OpenAI">
                                    <option value="openai:gpt-4o-transcribe">GPT-4o-Transcribe (OpenAI)</option>
                                    <option value="openai:gpt-4o-mini-transcribe">GPT-4o-mini-Transcribe (OpenAI)</option>
                                    <option value="openai:whisper-1">Whisper-1 (~400ms, $0.006/min)</option>
                                </optgroup>
                                <optgroup label="Fast Inference">
                                    <option value="groq:whisper-large-v3-turbo">Groq Whisper v3 Turbo (~300ms TTFT)</option>
                                </optgroup>
                                <optgroup label="Cloud Providers">
                                    <option value="azure:speech">Azure AI Speech</option>
                                    <option value="google:speech">Google Speech-to-Text</option>
                                    <option value="aws:transcribe">Amazon Transcribe</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>TTS Provider</label>
                            <select id="voiceTTSProvider">
                                <optgroup label="Recommended for Voice AI">
                                    <option value="cartesia:sonic">Cartesia Sonic (~190ms TTFB, $0.02/min)</option>
                                    <option value="deepgram:aura">Deepgram Aura (~150ms TTFB, $0.008/min)</option>
                                    <option value="elevenlabs:flash-v2">ElevenLabs Flash v2 (~170ms, $0.04/min)</option>
                                </optgroup>
                                <optgroup label="High Quality">
                                    <option value="elevenlabs:turbo-v2">ElevenLabs Turbo v2 (Emotional, $0.08/min)</option>
                                    <option value="rime:conversational">Rime (Conversational, $0.024/min)</option>
                                </optgroup>
                                <optgroup label="OpenAI">
                                    <option value="openai:tts-1">TTS-1 (OpenAI, $0.015/1K chars)</option>
                                    <option value="openai:tts-1-hd">TTS-1-HD (OpenAI, $0.030/1K chars)</option>
                                    <option value="openai:gpt-4o-mini-tts">GPT-4o-mini-TTS (Steerable)</option>
                                </optgroup>
                                <optgroup label="Cloud Providers">
                                    <option value="azure:neural">Azure Neural TTS</option>
                                    <option value="google:wavenet">Google WaveNet</option>
                                    <option value="aws:polly">Amazon Polly</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>
                    
                    <div class="model-detail-section" style="margin-bottom: 20px;">
                        <h3>Current Pricing</h3>
                        <div style="background: var(--black); padding: 16px; margin-bottom: 16px; border: 1px solid var(--white);">
                            <div style="font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px; color: var(--white);">LLM Pricing (Auto-loaded)</div>
                            <div style="font-size: 10px; color: var(--white); margin-bottom: 12px;">Per 1 billion tokens (prices). Input/Output tokens are in BILLIONS.</div>
                            <div class="detail-item" style="padding: 6px 0; border-bottom: 1px solid var(--white);">
                                <span>LLM Input Token Cost</span>
                                <span id="llmInputPriceDisplay" style="font-weight: 600;">-</span>
                            </div>
                            <div class="detail-item" style="padding: 6px 0;">
                                <span>LLM Output Token Cost</span>
                                <span id="llmOutputPriceDisplay" style="font-weight: 600;">-</span>
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Transcription Cost/Min</label>
                                <input type="number" id="transcriptionCost" value="0.006" step="0.000001" min="0">
                                <div style="font-size: 11px; color: var(--gray-500); margin-top: 4px;" id="sttPriceDisplay">Auto-calculated</div>
                            </div>
                            <div class="input-group">
                                <label>Voice Cost/Character</label>
                                <input type="number" id="voiceCost" value="0.000015" step="0.000000001" min="0">
                                <div style="font-size: 11px; color: var(--gray-500); margin-top: 4px;" id="ttsPriceDisplay">Auto-calculated from TTS model</div>
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>vCPU Cost/Minute</label>
                                <input type="number" id="vcpuCost" value="0.00007083333" step="0.00001" min="0">
                            </div>
                            <div class="input-group">
                                <label>Agents Per vCPU</label>
                                <input type="number" id="agentsPerVCPU" value="1" min="1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="model-detail-section">
                        <h3>Calculation Assumptions</h3>
                        <div class="input-group">
                            <label>Conversation Length</label>
                            <input type="number" id="convoLength" value="15" min="1">
                            <div style="font-size: 11px; color: var(--gray-500); margin-top: 4px;">minutes</div>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Words Per Minute</label>
                                <input type="number" id="wordsPerMin" value="100" min="1">
                            </div>
                            <div class="input-group">
                                <label>Tokens Per Word</label>
                                <input type="number" id="tokensPerWord" value="1.3" step="0.1" min="0.1">
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group">
                                <label>Characters/Word</label>
                                <input type="number" id="charsPerWord" value="6" min="1">
                            </div>
                            <div class="input-group">
                                <label>Turns Per Minute</label>
                                <input type="number" id="turnsPerMin" value="4" min="1">
                            </div>
                        </div>
                        <div class="input-row">
                        <div class="input-group">
                            <label>LLM Speech Ratio</label>
                            <input type="number" id="llmSpeechRatio" value="0.5" step="0.1" min="0" max="1">
                            <div style="font-size: 11px; color: var(--gray-500); margin-top: 4px;">Ratio of LLM speech vs user (0-1)</div>
                            </div>
                            <div class="input-group">
                                <label>Context Window (turns)</label>
                                <input type="number" id="contextWindowTurns" value="10" min="1" max="100">
                                <div style="font-size: 11px; color: var(--gray-500); margin-top: 4px;">Max turns in context (sliding window)</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Right: Results -->
                <div>
                    <div class="calc-result" style="margin-bottom: 20px;">
                        <div class="cost-breakdown">
                            <h3>Results</h3>
                            <div id="voiceResults">
                                <div class="stat-card" style="margin-bottom: 20px; border: 1px solid var(--white); padding: 24px; text-align: center;">
                                    <h3 style="margin-bottom: 16px; font-size: 12px;">Total Cost</h3>
                                    <div class="stat-value" id="voiceTotalCost" style="font-size: 42px; margin-bottom: 8px;">$0.00</div>
                                    <div class="stat-label" id="voiceCostPerMin" style="margin-top: 8px;">$0.00 per minute</div>
                                    <div style="font-size: 11px; color: var(--white); margin-top: 12px; font-style: italic;">Final prices might be higher!</div>
                                </div>
                                <div id="voiceCostBreakdown"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="model-detail-section">
                        <h3>Token Usage</h3>
                        <div id="tokenUsage" style="padding: 20px; background: var(--black); border: 1px solid var(--white);">
                            <div class="detail-item" style="padding: 12px 0; border-bottom: 1px solid var(--white);">
                                <span style="font-weight: 600;">Input Tokens</span>
                                <span id="inputTokensDisplay" style="font-weight: 700; font-size: 18px;">0</span>
                            </div>
                            <div class="detail-item" style="padding: 12px 0;">
                                <span style="font-weight: 600;">Output Tokens</span>
                                <span id="outputTokensDisplay" style="font-weight: 700; font-size: 18px;">0</span>
                            </div>
                        </div>
                        <div style="margin-top: 20px; display: flex; gap: 12px;">
                            <button class="btn" onclick="exportVoiceAICalculation('csv')">Export CSV</button>
                            <button class="btn" onclick="exportVoiceAICalculation('json')">Export JSON</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Latency Section -->
            <div class="model-detail-section" style="margin-top: 40px;">
                <h3>Latency Breakdown</h3>
                <div id="latencyBreakdown"></div>
            </div>
            
            <!-- Formula Documentation -->
            <div class="model-detail-section" style="margin-top: 40px;">
                <h3>Formula Documentation</h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                    <div style="border: 1px solid var(--white); padding: 16px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">LLM Input Tokens</h4>
                        <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); margin-bottom: 8px; line-height: 1.6;">
                            tokens_per_turn Ã— (early_quadratic + sliding_window)
                        </div>
                        <div style="font-size: 10px; color: var(--white);">Sliding window caps context growth (default 10 turns)</div>
                    </div>
                    <div style="border: 1px solid var(--white); padding: 16px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">LLM Output Tokens</h4>
                        <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); margin-bottom: 8px;">
                            words_per_min Ã— tokens_per_word Ã— llm_speech_ratio Ã— convo_length
                        </div>
                        <div style="font-size: 10px; color: var(--white);">Based on speaking ratio</div>
                    </div>
                    <div style="border: 1px solid var(--white); padding: 16px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">Transcription Cost</h4>
                        <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); margin-bottom: 8px;">
                            transcription_cost_per_min Ã— convo_length
                        </div>
                        <div style="font-size: 10px; color: var(--white);">Total speech-to-text cost</div>
                    </div>
                    <div style="border: 1px solid var(--white); padding: 16px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">LLM Cost</h4>
                        <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); margin-bottom: 8px;">
                            (input_tokens Ã— input_cost) + (output_tokens Ã— output_cost)
                        </div>
                        <div style="font-size: 10px; color: var(--white);">Combined processing cost</div>
                    </div>
                    <div style="border: 1px solid var(--white); padding: 16px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">Voice Cost (TTS)</h4>
                        <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); margin-bottom: 8px; line-height: 1.6;">
                            voice_cost Ã— words_per_min Ã— chars_per_word Ã— llm_speech_ratio Ã— convo_length
                        </div>
                        <div style="font-size: 10px; color: var(--white);">TTS for AI responses (llm_speech_ratio)</div>
                    </div>
                    <div style="border: 1px solid var(--white); padding: 16px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">Hosting Cost</h4>
                        <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); margin-bottom: 8px;">
                            (vcpu_cost Ã— convo_length) Ã· agents_per_vcpu
                        </div>
                        <div style="font-size: 10px; color: var(--white);">Infrastructure per agent</div>
                </div>
            </div>
        </div>

            <!-- Real-World Defaults Documentation -->
            <div class="model-detail-section" style="margin-top: 40px;">
                <h3>Real-World Default Assumptions</h3>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; font-size: 11px;">
                        <div style="border: 1px solid var(--white); padding: 16px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">Conversation Parameters</h4>
                        <div style="line-height: 2; color: var(--white);">
                            <div><strong>100 WPM:</strong> Average conversational speech rate (120-150 WPM fast, 80-100 WPM slow)</div>
                            <div><strong>1.3 tokens/word:</strong> Standard for English text (OpenAI tokenizer averages 1.2-1.4)</div>
                            <div><strong>6 chars/word:</strong> English average including spaces (~4.5 letters + space)</div>
                            <div><strong>4 turns/min:</strong> Natural conversation pace (15 sec per turn average)</div>
                            <div><strong>0.5 LLM ratio:</strong> Balanced conversation (50% AI, 50% user speaking time)</div>
                            <div><strong>10 turn context:</strong> Sliding window for practical memory management</div>
                        </div>
                        </div>
                        <div style="border: 1px solid var(--white); padding: 16px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">Latency Components</h4>
                        <div style="line-height: 2; color: var(--white);">
                            <div><strong>STT:</strong> 200-450ms (Deepgram ~200ms, Whisper ~400ms)</div>
                            <div><strong>LLM TTFT:</strong> 50-500ms (model dependent, includes input processing)</div>
                            <div><strong>TTS:</strong> 80-200ms (ElevenLabs Flash ~80ms, standard ~150ms)</div>
                            <div><strong>Network:</strong> 10-50ms one-way (varies by region and provider)</div>
                            <div><strong>Audio I/O:</strong> ~120ms (mic, encoding, jitter buffer, speaker)</div>
                            <div><strong>Total target:</strong> &lt;800ms for natural conversation feel</div>
                        </div>
                        </div>
                        </div>
            </div>
            </div><!-- End voice-calc-section -->
            
            <!-- Voice Guide Section (hidden by default) -->
            <div id="voice-guide-section" style="display: none;">
            <div style="max-width: 1200px; margin: 0 auto;">
                <div class="section-header" style="text-align: center;">
                    <h2>Voice AI & Voice Agents: An Illustrated Primer</h2>
                    <p>A comprehensive guide to building conversational voice AI in 2025. Covers architecture, latency optimization, provider selection, turn detection, function calling, and production best practices.</p>
                </div>

                <!-- Table of Contents -->
                <div class="model-detail-section" style="margin-bottom: 30px;">
                    <h3 style="font-size: 14px; margin-bottom: 16px;">Table of Contents</h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; font-size: 12px;">
                        <div style="background: var(--accent-dim); padding: 12px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <a href="#guide-intro" style="color: var(--white); text-decoration: none;">1. Conversational Voice AI in 2025</a>
                        </div>
                        <div style="background: var(--accent-dim); padding: 12px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <a href="#guide-loop" style="color: var(--white); text-decoration: none;">2. The Basic Conversational AI Loop</a>
                        </div>
                        <div style="background: var(--accent-dim); padding: 12px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <a href="#guide-latency" style="color: var(--white); text-decoration: none;">3. Latency Optimization</a>
                        </div>
                        <div style="background: var(--accent-dim); padding: 12px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <a href="#guide-llms" style="color: var(--white); text-decoration: none;">4. LLMs for Voice Use Cases</a>
                        </div>
                        <div style="background: var(--accent-dim); padding: 12px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <a href="#guide-stt" style="color: var(--white); text-decoration: none;">5. Speech-to-Text</a>
                        </div>
                        <div style="background: var(--accent-dim); padding: 12px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <a href="#guide-tts" style="color: var(--white); text-decoration: none;">6. Text-to-Speech</a>
                        </div>
                        <div style="background: var(--accent-dim); padding: 12px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <a href="#guide-audio" style="color: var(--white); text-decoration: none;">7. Audio Processing</a>
                        </div>
                        <div style="background: var(--accent-dim); padding: 12px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <a href="#guide-network" style="color: var(--white); text-decoration: none;">8. Network Transport</a>
                        </div>
                        <div style="background: var(--accent-dim); padding: 12px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <a href="#guide-turn" style="color: var(--white); text-decoration: none;">9. Turn Detection & Interruptions</a>
                        </div>
                    </div>
                </div>

                <!-- Section 1: Introduction -->
                <div id="guide-intro" class="model-detail-section" style="margin-bottom: 40px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 12px;">1. Conversational Voice AI in 2025</h3>
                    
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px;">
                        <div>
                            <p style="font-size: 13px; line-height: 1.8; color: var(--gray-300); margin-bottom: 16px;">
                                LLMs are good conversationalists. If you've spent much time in free-form dialog with ChatGPT or Claude, you have an intuitive sense that talking to an LLM feels quite natural and is broadly useful.
                            </p>
                            <p style="font-size: 13px; line-height: 1.8; color: var(--gray-300); margin-bottom: 16px;">
                                LLMs are also good at turning unstructured information into structured data. New voice AI agents leverage these two LLM capabilities â€“ <strong style="color: var(--white);">conversation</strong>, and <strong style="color: var(--white);">extracting structure from unstructured data</strong> â€“ to create a new kind of user experience.
                            </p>
                            <div style="background: var(--accent-dim); padding: 16px; border-left: 3px solid var(--white); margin-top: 20px;">
                                <h4 style="font-size: 12px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">Voice AI Use Cases Today</h4>
                                <ul style="font-size: 12px; line-height: 2; color: var(--gray-400); list-style: none; padding-left: 0;">
                                    <li>â€¢ Collecting patient data prior to healthcare appointments</li>
                                    <li>â€¢ Following up on inbound sales leads</li>
                                    <li>â€¢ Handling an increasing variety of call center tasks</li>
                                    <li>â€¢ Coordinating scheduling and logistics between companies</li>
                                    <li>â€¢ Answering the phone for nearly every kind of small business</li>
                                    <li>â€¢ Social applications and games with conversational AI</li>
                                </ul>
                            </div>
                        </div>
                        <div style="background: var(--black); padding: 20px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase; color: var(--gray-500);">Key LLM Capabilities for Voice AI</h4>
                            <div style="space-y: 12px;">
                                <div style="padding: 12px; background: var(--accent-dim); border-radius: 6px; margin-bottom: 8px;">
                                    <div style="font-weight: 600; font-size: 12px; margin-bottom: 4px;">Conversation</div>
                                    <div style="font-size: 11px; color: var(--gray-500);">Natural multi-turn dialog with context retention</div>
                                </div>
                                <div style="padding: 12px; background: var(--accent-dim); border-radius: 6px; margin-bottom: 8px;">
                                    <div style="font-weight: 600; font-size: 12px; margin-bottom: 4px;">Instruction Following</div>
                                    <div style="font-size: 11px; color: var(--gray-500);">Precise execution of complex workflows</div>
                                </div>
                                <div style="padding: 12px; background: var(--accent-dim); border-radius: 6px; margin-bottom: 8px;">
                                    <div style="font-weight: 600; font-size: 12px; margin-bottom: 4px;">Function Calling</div>
                                    <div style="font-size: 11px; color: var(--gray-500);">Integration with backend systems via structured output</div>
                                </div>
                                <div style="padding: 12px; background: var(--accent-dim); border-radius: 6px;">
                                    <div style="font-weight: 600; font-size: 12px; margin-bottom: 4px;">Low Hallucination</div>
                                    <div style="font-size: 11px; color: var(--gray-500);">Reliable, accurate responses for production use</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 2: The Basic Loop with SVG Diagram -->
                <div id="guide-loop" class="model-detail-section" style="margin-bottom: 40px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 12px;">2. The Basic Conversational AI Loop</h3>
                    
                    <p style="font-size: 13px; line-height: 1.8; color: var(--gray-300); margin-bottom: 24px;">
                        The basic "job to be done" of a voice AI agent is to listen to what a human says, respond in some useful way, then repeat that sequence. Production voice agents today almost all have a very similar architecture.
                    </p>
                    
                    <!-- Architecture Diagram -->
                    <div style="background: var(--black); padding: 32px; border: 1px solid var(--border-subtle); border-radius: 12px; margin-bottom: 24px;">
                        <h4 style="font-size: 11px; font-weight: 600; margin-bottom: 24px; text-transform: uppercase; color: var(--gray-500); text-align: center;">Voice AI Agent Architecture</h4>
                        <svg viewBox="0 0 900 400" style="width: 100%; height: auto; max-height: 400px;">
                            <!-- Background -->
                            <defs>
                                <linearGradient id="cloudGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#1a1a1a"/>
                                    <stop offset="100%" style="stop-color:#0a0a0a"/>
                                </linearGradient>
                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
                                </marker>
                                <marker id="arrowheadWhite" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                    <polygon points="0 0, 10 3.5, 0 7" fill="#fff"/>
                                </marker>
                            </defs>
                            
                            <!-- User Device -->
                            <rect x="30" y="150" width="140" height="100" rx="8" fill="#1a1a1a" stroke="#333" stroke-width="2"/>
                            <text x="100" y="190" fill="#fff" font-size="12" font-weight="600" text-anchor="middle">User Device</text>
                            <text x="100" y="210" fill="#666" font-size="10" text-anchor="middle">Microphone + Speaker</text>
                            <text x="100" y="225" fill="#666" font-size="10" text-anchor="middle">Echo Cancellation</text>
                            
                            <!-- Cloud Region -->
                            <rect x="220" y="30" width="650" height="340" rx="12" fill="url(#cloudGrad)" stroke="#333" stroke-width="2" stroke-dasharray="5,5"/>
                            <text x="545" y="55" fill="#444" font-size="11" font-weight="500" text-anchor="middle">CLOUD</text>
                            
                            <!-- Voice Agent Program -->
                            <rect x="260" y="120" width="180" height="160" rx="8" fill="#0d0d0d" stroke="#fff" stroke-width="2"/>
                            <text x="350" y="150" fill="#fff" font-size="12" font-weight="600" text-anchor="middle">Voice Agent</text>
                            <text x="350" y="168" fill="#666" font-size="10" text-anchor="middle">Orchestration Program</text>
                            <line x1="280" y1="180" x2="420" y2="180" stroke="#333" stroke-width="1"/>
                            <text x="350" y="200" fill="#888" font-size="9" text-anchor="middle">â€¢ Context Management</text>
                            <text x="350" y="215" fill="#888" font-size="9" text-anchor="middle">â€¢ Turn Detection</text>
                            <text x="350" y="230" fill="#888" font-size="9" text-anchor="middle">â€¢ Interruption Handling</text>
                            <text x="350" y="245" fill="#888" font-size="9" text-anchor="middle">â€¢ Function Calling</text>
                            <text x="350" y="260" fill="#888" font-size="9" text-anchor="middle">â€¢ Stream Processing</text>
                            
                            <!-- STT -->
                            <rect x="500" y="70" width="130" height="70" rx="6" fill="#1a1a1a" stroke="#888" stroke-width="2"/>
                            <text x="565" y="100" fill="#ccc" font-size="11" font-weight="600" text-anchor="middle">Speech-to-Text</text>
                            <text x="565" y="118" fill="#666" font-size="9" text-anchor="middle">Deepgram, Gladia</text>
                            <text x="565" y="130" fill="#666" font-size="9" text-anchor="middle">~150-300ms TTFT</text>
                            
                            <!-- LLM -->
                            <rect x="680" y="150" width="150" height="100" rx="6" fill="#1a1a1a" stroke="#fff" stroke-width="2"/>
                            <text x="755" y="185" fill="#fff" font-size="11" font-weight="600" text-anchor="middle">LLM Inference</text>
                            <text x="755" y="203" fill="#666" font-size="9" text-anchor="middle">GPT-4o, Gemini Flash</text>
                            <text x="755" y="218" fill="#666" font-size="9" text-anchor="middle">Claude Sonnet</text>
                            <text x="755" y="233" fill="#666" font-size="9" text-anchor="middle">~300-500ms TTFT</text>
                            
                            <!-- TTS -->
                            <rect x="500" y="260" width="130" height="70" rx="6" fill="#1a1a1a" stroke="#666" stroke-width="2"/>
                            <text x="565" y="290" fill="#999" font-size="11" font-weight="600" text-anchor="middle">Text-to-Speech</text>
                            <text x="565" y="308" fill="#666" font-size="9" text-anchor="middle">Cartesia, ElevenLabs</text>
                            <text x="565" y="320" fill="#666" font-size="9" text-anchor="middle">~100-200ms TTFB</text>
                            
                            <!-- Arrows -->
                            <!-- User to Agent -->
                            <path d="M170 180 L250 180" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                            <text x="210" y="173" fill="#555" font-size="8" text-anchor="middle">Audio</text>
                            
                            <!-- Agent to STT -->
                            <path d="M400 150 L490 105" stroke="#888" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                            <text x="445" y="118" fill="#888" font-size="8">1. Transcribe</text>
                            
                            <!-- STT to Agent -->
                            <path d="M500 120 L420 165" stroke="#888" stroke-width="1.5" stroke-dasharray="3,3"/>
                            <text x="455" y="152" fill="#888" font-size="8">Text</text>
                            
                            <!-- Agent to LLM -->
                            <path d="M440 200 L670 200" stroke="#fff" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                            <text x="555" y="193" fill="#fff" font-size="8">2. Generate Response</text>
                            
                            <!-- LLM to Agent -->
                            <path d="M680 220 L450 220" stroke="#fff" stroke-width="1.5" stroke-dasharray="3,3"/>
                            <text x="565" y="235" fill="#fff" font-size="8">Streaming Text</text>
                            
                            <!-- Agent to TTS -->
                            <path d="M420 250 L490 280" stroke="#666" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                            <text x="445" y="275" fill="#666" font-size="8">3. Synthesize</text>
                            
                            <!-- TTS to Agent -->
                            <path d="M500 300 L410 270" stroke="#666" stroke-width="1.5" stroke-dasharray="3,3"/>
                            <text x="460" y="293" fill="#666" font-size="8">Audio</text>
                            
                            <!-- Agent to User -->
                            <path d="M250 220 L170 220" stroke="#fff" stroke-width="2" marker-end="url(#arrowheadWhite)"/>
                            <text x="210" y="237" fill="#888" font-size="8" text-anchor="middle">4. Response</text>
                            
                            <!-- Step Numbers -->
                            <circle cx="495" cy="88" r="10" fill="#888"/>
                            <text x="495" y="92" fill="#000" font-size="9" font-weight="700" text-anchor="middle">1</text>
                            
                            <circle cx="680" cy="178" r="10" fill="#fff"/>
                            <text x="680" y="182" fill="#000" font-size="9" font-weight="700" text-anchor="middle">2</text>
                            
                            <circle cx="495" cy="278" r="10" fill="#666"/>
                            <text x="495" y="282" fill="#fff" font-size="9" font-weight="700" text-anchor="middle">3</text>
                            
                            <circle cx="210" cy="220" r="10" fill="#fff"/>
                            <text x="210" y="224" fill="#000" font-size="9" font-weight="700" text-anchor="middle">4</text>
                        </svg>
                    </div>
                    
                    <!-- Steps Explanation -->
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px;">
                        <div style="padding: 16px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                <span style="width: 24px; height: 24px; background: #888; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; color: #000;">1</span>
                                <span style="font-weight: 600; font-size: 12px;">Speech-to-Text</span>
                            </div>
                            <p style="font-size: 11px; color: var(--gray-400); line-height: 1.6;">User speech is captured, encoded (Opus), sent over network, and transcribed to text.</p>
                        </div>
                        <div style="padding: 16px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                <span style="width: 24px; height: 24px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; color: #000;">2</span>
                                <span style="font-weight: 600; font-size: 12px;">LLM Generation</span>
                            </div>
                            <p style="font-size: 11px; color: var(--gray-400); line-height: 1.6;">Text assembled into context, inference performed. Output may include function calls.</p>
                        </div>
                        <div style="padding: 16px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                <span style="width: 24px; height: 24px; background: #666; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; color: #fff;">3</span>
                                <span style="font-weight: 600; font-size: 12px;">Text-to-Speech</span>
                            </div>
                            <p style="font-size: 11px; color: var(--gray-400); line-height: 1.6;">Streaming text converted to natural voice audio with word-level timestamps.</p>
                        </div>
                        <div style="padding: 16px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                <span style="width: 24px; height: 24px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; color: #000;">4</span>
                                <span style="font-weight: 600; font-size: 12px;">Audio Response</span>
                            </div>
                            <p style="font-size: 11px; color: var(--gray-400); line-height: 1.6;">Audio sent back to user's device via WebRTC or WebSocket for playback.</p>
                        </div>
                    </div>
                </div>

                <!-- Section 3: Latency -->
                <div id="guide-latency" class="model-detail-section" style="margin-bottom: 40px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 12px;">3. Latency Optimization</h3>
                    
                    <div style="background: var(--accent-dim); padding: 20px; border: 1px solid var(--border-subtle); border-radius: 8px; margin-bottom: 24px;">
                        <p style="font-size: 13px; line-height: 1.8; color: var(--gray-300); margin: 0;">
                            <strong style="color: var(--white);">The big difference is latency.</strong> Humans expect fast responses in normal conversation. A response time of 500ms is typical. Long pauses feel unnatural. If you build conversational AI applications, <strong style="color: var(--white);">800ms voice-to-voice latency is a good target to aim for.</strong>
                        </p>
                    </div>
                    
                    <!-- Latency Breakdown Table -->
                    <div style="background: var(--black); border: 1px solid var(--border-subtle); border-radius: 8px; overflow: hidden; margin-bottom: 24px;">
                        <div style="padding: 16px; background: var(--accent-dim); border-bottom: 1px solid var(--border-subtle);">
                            <h4 style="font-size: 11px; font-weight: 600; text-transform: uppercase; margin: 0;">Voice-to-Voice Round Trip Latency Breakdown</h4>
                        </div>
                        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                            <thead>
                                <tr style="background: var(--accent-dim);">
                                    <th style="padding: 12px 16px; text-align: left; font-weight: 600; border-bottom: 1px solid var(--border-subtle);">Stage</th>
                                    <th style="padding: 12px 16px; text-align: right; font-weight: 600; border-bottom: 1px solid var(--border-subtle);">Time (ms)</th>
                                    <th style="padding: 12px 16px; text-align: left; font-weight: 600; border-bottom: 1px solid var(--border-subtle);">Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">macOS mic input</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">40</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);">OS audio capture</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Opus encoding</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">21</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);">Audio compression</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Network stacks and transit</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">10</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);">One-way</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Packet handling</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">2</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);"></td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Jitter buffer</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">40</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);">Smoothing packet arrival</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Opus decoding</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">1</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);"></td></tr>
                                <tr style="background: rgba(255,255,255,0.05);"><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600; color: var(--white);">Transcription + endpointing</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); font-weight: 600; color: var(--white);">300</td><td style="padding: 10px 16px; color: var(--white); border-bottom: 1px solid var(--border-subtle);">Major component</td></tr>
                                <tr style="background: rgba(255,255,255,0.05);"><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600; color: var(--white);">LLM TTFB</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); font-weight: 600; color: var(--white);">350</td><td style="padding: 10px 16px; color: var(--white); border-bottom: 1px solid var(--border-subtle);">Major component</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Sentence aggregation</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">20</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);"></td></tr>
                                <tr style="background: rgba(255,255,255,0.05);"><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600; color: var(--white);">TTS TTFB</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); font-weight: 600; color: var(--white);">120</td><td style="padding: 10px 16px; color: var(--white); border-bottom: 1px solid var(--border-subtle);">Major component</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Opus encoding</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">21</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);"></td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Network + jitter buffer</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">52</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);">Return path</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">macOS speaker output</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">15</td><td style="padding: 10px 16px; color: var(--gray-500); border-bottom: 1px solid var(--border-subtle);"></td></tr>
                                <tr style="background: var(--accent-dim);"><td style="padding: 12px 16px; font-weight: 700; font-size: 13px;">TOTAL</td><td style="padding: 12px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; font-weight: 700; font-size: 14px;">~993</td><td style="padding: 12px 16px; color: var(--gray-400);">Target: &lt;800ms</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Section 4: LLMs for Voice -->
                <div id="guide-llms" class="model-detail-section" style="margin-bottom: 40px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 12px;">4. LLMs for Voice Use Cases</h3>
                    
                    <p style="font-size: 13px; line-height: 1.8; color: var(--gray-300); margin-bottom: 20px;">
                        Voice AI use cases are demanding enough that it generally makes sense to use the best available models. GPT-4o and Gemini 2.0 Flash are the dominant models for conversational voice AI today.
                    </p>
                    
                    <!-- LLM Comparison Table -->
                    <div style="background: var(--black); border: 1px solid var(--border-subtle); border-radius: 8px; overflow: hidden; margin-bottom: 24px;">
                        <div style="padding: 16px; background: var(--accent-dim); border-bottom: 1px solid var(--border-subtle);">
                            <h4 style="font-size: 11px; font-weight: 600; text-transform: uppercase; margin: 0;">LLM Time to First Token (TTFT) Comparison</h4>
                        </div>
                        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                            <thead>
                                <tr style="background: var(--accent-dim);">
                                    <th style="padding: 12px 16px; text-align: left; font-weight: 600;">Model</th>
                                    <th style="padding: 12px 16px; text-align: right; font-weight: 600;">Median TTFT</th>
                                    <th style="padding: 12px 16px; text-align: right; font-weight: 600;">P95 TTFT</th>
                                    <th style="padding: 12px 16px; text-align: center; font-weight: 600;">Voice AI Ready</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">GPT-4o</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">460ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">580ms</td><td style="padding: 10px 16px; text-align: center; border-bottom: 1px solid var(--border-subtle);">Yes</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">GPT-4o mini</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">290ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">420ms</td><td style="padding: 10px 16px; text-align: center; border-bottom: 1px solid var(--border-subtle);">Yes</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">GPT-4.1</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">450ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">670ms</td><td style="padding: 10px 16px; text-align: center; border-bottom: 1px solid var(--border-subtle);">Yes</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Gemini 2.0 Flash</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">380ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">450ms</td><td style="padding: 10px 16px; text-align: center; border-bottom: 1px solid var(--border-subtle);">Yes</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Llama 4 Maverick (Groq)</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">290ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">360ms</td><td style="padding: 10px 16px; text-align: center; border-bottom: 1px solid var(--border-subtle);">Yes</td></tr>
                                <tr style="background: rgba(255,255,255,0.03);"><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle);">Claude Sonnet 3.7</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--gray-400);">1,410ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--gray-400);">2,140ms</td><td style="padding: 10px 16px; text-align: center; border-bottom: 1px solid var(--border-subtle);">Too slow</td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Cost Comparison -->
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                        <div style="padding: 20px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px; text-align: center;">
                            <div style="font-size: 11px; color: var(--gray-500); text-transform: uppercase; margin-bottom: 8px;">3-min conversation</div>
                            <div style="font-size: 10px; margin-bottom: 4px;">GPT-4o: <span style="color: var(--white); font-weight: 600;">$0.009</span></div>
                            <div style="font-size: 10px;">Gemini Flash: <span style="color: var(--white); font-weight: 600;">$0.0004</span></div>
                        </div>
                        <div style="padding: 20px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px; text-align: center;">
                            <div style="font-size: 11px; color: var(--gray-500); text-transform: uppercase; margin-bottom: 8px;">10-min conversation</div>
                            <div style="font-size: 10px; margin-bottom: 4px;">GPT-4o: <span style="color: var(--white); font-weight: 600;">$0.08</span></div>
                            <div style="font-size: 10px;">Gemini Flash: <span style="color: var(--white); font-weight: 600;">$0.004</span></div>
                        </div>
                        <div style="padding: 20px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px; text-align: center;">
                            <div style="font-size: 11px; color: var(--gray-500); text-transform: uppercase; margin-bottom: 8px;">30-min conversation</div>
                            <div style="font-size: 10px; margin-bottom: 4px;">GPT-4o: <span style="color: var(--gray-400); font-weight: 600;">$0.75</span></div>
                            <div style="font-size: 10px;">Gemini Flash: <span style="color: var(--white); font-weight: 600;">$0.03</span></div>
                        </div>
                    </div>
                    <p style="font-size: 11px; color: var(--gray-500); margin-top: 12px; text-align: center;">Session costs grow super-linearly with duration. 30-min â‰ˆ 100x cost of 3-min. Use caching and context summarization for long sessions.</p>
                </div>

                <!-- Section 5: STT -->
                <div id="guide-stt" class="model-detail-section" style="margin-bottom: 40px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 12px;">5. Speech-to-Text Providers</h3>
                    
                    <p style="font-size: 13px; line-height: 1.8; color: var(--gray-300); margin-bottom: 20px;">
                        For voice AI use cases, we need very low transcription latency and very low word error rate. Most production voice AI agents today use <strong style="color: var(--white);">Deepgram</strong> or <strong style="color: var(--white);">Gladia</strong> for speech-to-text.
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 24px;">
                        <div style="padding: 24px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 12px;">
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: var(--white);">Deepgram</h4>
                            <ul style="font-size: 12px; line-height: 2; color: var(--gray-400); list-style: none; padding-left: 0;">
                                <li>â€¢ <strong style="color: var(--white);">~150ms TTFT</strong> for US users</li>
                                <li>â€¢ Available as API or Docker containers</li>
                                <li>â€¢ Excellent for English speech</li>
                                <li>â€¢ Fine-tuning services available</li>
                                <li>â€¢ ~250ms from Europe, ~350ms from India</li>
                            </ul>
                        </div>
                        <div style="padding: 24px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 12px;">
                            <h4 style="font-size: 14px; font-weight: 600; margin-bottom: 12px; color: var(--white);">Gladia</h4>
                            <ul style="font-size: 12px; line-height: 2; color: var(--gray-400); list-style: none; padding-left: 0;">
                                <li>â€¢ <strong style="color: var(--white);">100+ languages</strong> supported</li>
                                <li>â€¢ Inference in US and Europe</li>
                                <li>â€¢ European data residency compliant</li>
                                <li>â€¢ Best for multilingual applications</li>
                                <li>â€¢ Self-hosted options available</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div style="background: var(--accent-dim); padding: 20px; border-left: 3px solid var(--white); border-radius: 0 8px 8px 0;">
                        <h4 style="font-size: 12px; font-weight: 600; margin-bottom: 8px; color: var(--white);">Pro Tip: Prompting can help the LLM</h4>
                        <p style="font-size: 12px; color: var(--gray-400); margin: 0; line-height: 1.7;">
                            A large percentage of transcription errors result from the small amount of context available. Today's LLMs are smart enough to work around these errors. Tell the LLM the input is a transcription and it should reason accordingly. Example: "If the transcription says 'buy milk two tomorrow' interpret this as 'buy milk tomorrow'."
                        </p>
                    </div>
                </div>

                <!-- Section 6: TTS -->
                <div id="guide-tts" class="model-detail-section" style="margin-bottom: 40px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 12px;">6. Text-to-Speech Providers</h3>
                    
                    <!-- TTS Comparison Table -->
                    <div style="background: var(--black); border: 1px solid var(--border-subtle); border-radius: 8px; overflow: hidden; margin-bottom: 24px;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 12px;">
                            <thead>
                                <tr style="background: var(--accent-dim);">
                                    <th style="padding: 12px 16px; text-align: left; font-weight: 600;">Provider</th>
                                    <th style="padding: 12px 16px; text-align: right; font-weight: 600;">Cost/min</th>
                                    <th style="padding: 12px 16px; text-align: right; font-weight: 600;">Median TTFB</th>
                                    <th style="padding: 12px 16px; text-align: right; font-weight: 600;">P95 TTFB</th>
                                    <th style="padding: 12px 16px; text-align: left; font-weight: 600;">Strength</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600;">Cartesia</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">$0.02</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">190ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">260ms</td><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); color: var(--gray-400);">SSM architecture, low latency</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600;">Deepgram</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">$0.008</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">150ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">320ms</td><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); color: var(--gray-400);">Cheapest, fastest</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600;">ElevenLabs Turbo v2</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">$0.08</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">300ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">510ms</td><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); color: var(--gray-400);">Emotional realism</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600;">ElevenLabs Flash v2</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">$0.04</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">170ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle); color: var(--white);">190ms</td><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); color: var(--gray-400);">Good balance</td></tr>
                                <tr><td style="padding: 10px 16px; font-weight: 600;">Rime</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace;">$0.024</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace;">340ms</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace;">980ms</td><td style="padding: 10px 16px; color: var(--gray-400);">Conversational speech models</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Section 7: Audio Processing -->
                <div id="guide-audio" class="model-detail-section" style="margin-bottom: 40px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 12px;">7. Audio Processing</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                        <div style="padding: 20px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <h4 style="font-size: 12px; font-weight: 600; margin-bottom: 12px;">Echo Cancellation</h4>
                            <p style="font-size: 11px; color: var(--gray-400); line-height: 1.7;">Critical for speakerphone use. Must run on-device due to latency sensitivity. Built into WebRTC and telephony stacks.</p>
                        </div>
                        <div style="padding: 20px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <h4 style="font-size: 12px; font-weight: 600; margin-bottom: 12px;">Voice Activity Detection</h4>
                            <p style="font-size: 11px; color: var(--gray-400); line-height: 1.7;">Silero VAD is the most common. Runs on CPU, supports 8khz/16khz, available as WASM for browsers.</p>
                        </div>
                        <div style="padding: 20px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <h4 style="font-size: 12px; font-weight: 600; margin-bottom: 12px;">Speaker Isolation</h4>
                            <p style="font-size: 11px; color: var(--gray-400); line-height: 1.7;">Krisp offers the best speaker isolation model. Suppresses background speech significantly improving transcription accuracy.</p>
                        </div>
                    </div>
                    
                    <!-- Codec Comparison -->
                    <div style="background: var(--black); border: 1px solid var(--border-subtle); border-radius: 8px; overflow: hidden; margin-top: 20px;">
                        <div style="padding: 16px; background: var(--accent-dim); border-bottom: 1px solid var(--border-subtle);">
                            <h4 style="font-size: 11px; font-weight: 600; text-transform: uppercase; margin: 0;">Audio Codec Comparison</h4>
                        </div>
                        <table style="width: 100%; border-collapse: collapse; font-size: 11px;">
                            <thead>
                                <tr style="background: var(--accent-dim);">
                                    <th style="padding: 10px 16px; text-align: left; font-weight: 600;">Codec</th>
                                    <th style="padding: 10px 16px; text-align: right; font-weight: 600;">Bitrate</th>
                                    <th style="padding: 10px 16px; text-align: center; font-weight: 600;">Quality</th>
                                    <th style="padding: 10px 16px; text-align: left; font-weight: 600;">Use Cases</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600;">16-bit PCM</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">384 kbps</td><td style="padding: 10px 16px; text-align: center; border-bottom: 1px solid var(--border-subtle);">Very High</td><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); color: var(--gray-400);">Recording, embedded systems</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600; color: var(--white);">Opus 32 kbps</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">32 kbps</td><td style="padding: 10px 16px; text-align: center; border-bottom: 1px solid var(--border-subtle);">Good</td><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); color: var(--white);">Voice AI (recommended)</td></tr>
                                <tr><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); font-weight: 600;">Opus 96 kbps</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-subtle);">96 kbps</td><td style="padding: 10px 16px; text-align: center; border-bottom: 1px solid var(--border-subtle);">Excellent</td><td style="padding: 10px 16px; border-bottom: 1px solid var(--border-subtle); color: var(--gray-400);">Music, high-fidelity</td></tr>
                                <tr><td style="padding: 10px 16px; font-weight: 600;">G.711 (8 kHz)</td><td style="padding: 10px 16px; text-align: right; font-family: 'IBM Plex Mono', monospace;">64 kbps</td><td style="padding: 10px 16px; text-align: center;">Poor</td><td style="padding: 10px 16px; color: var(--gray-400);">Legacy telephony, PSTN</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Section 8: Network Transport -->
                <div id="guide-network" class="model-detail-section" style="margin-bottom: 40px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 12px;">8. Network Transport: WebRTC vs WebSockets</h3>
                    
                    <!-- WebRTC vs WebSocket Diagram -->
                    <div style="background: var(--black); padding: 24px; border: 1px solid var(--border-subtle); border-radius: 12px; margin-bottom: 24px;">
                        <svg viewBox="0 0 800 300" style="width: 100%; height: auto;">
                            <!-- WebSocket Side -->
                            <rect x="20" y="40" width="360" height="220" rx="8" fill="#0a0a0a" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
                            <text x="200" y="70" fill="#888" font-size="14" font-weight="600" text-anchor="middle">WebSockets (Not Recommended)</text>
                            
                            <rect x="50" y="100" width="80" height="50" rx="4" fill="#1a1a1a" stroke="#666"/>
                            <text x="90" y="130" fill="#888" font-size="10" text-anchor="middle">Client</text>
                            
                            <rect x="270" y="100" width="80" height="50" rx="4" fill="#1a1a1a" stroke="#666"/>
                            <text x="310" y="130" fill="#888" font-size="10" text-anchor="middle">Server</text>
                            
                            <path d="M130 125 L270 125" stroke="#888" stroke-width="2"/>
                            <text x="200" y="118" fill="#888" font-size="9" text-anchor="middle">TCP (Head-of-line blocking)</text>
                            
                            <text x="200" y="180" fill="#666" font-size="10" text-anchor="middle">- No congestion control</text>
                            <text x="200" y="195" fill="#666" font-size="10" text-anchor="middle">- No built-in echo cancellation</text>
                            <text x="200" y="210" fill="#666" font-size="10" text-anchor="middle">- Late packets block stream</text>
                            <text x="200" y="225" fill="#666" font-size="10" text-anchor="middle">- Reconnection is complex</text>
                            <text x="200" y="240" fill="#666" font-size="10" text-anchor="middle">+ Good for prototyping</text>
                            
                            <!-- WebRTC Side -->
                            <rect x="420" y="40" width="360" height="220" rx="8" fill="#0a0a0a" stroke="#fff" stroke-width="2"/>
                            <text x="600" y="70" fill="#fff" font-size="14" font-weight="600" text-anchor="middle">WebRTC (Recommended)</text>
                            
                            <rect x="450" y="100" width="80" height="50" rx="4" fill="#1a1a1a" stroke="#666"/>
                            <text x="490" y="130" fill="#888" font-size="10" text-anchor="middle">Client</text>
                            
                            <rect x="670" y="100" width="80" height="50" rx="4" fill="#1a1a1a" stroke="#666"/>
                            <text x="710" y="130" fill="#888" font-size="10" text-anchor="middle">Server</text>
                            
                            <path d="M530 125 L670 125" stroke="#fff" stroke-width="2"/>
                            <text x="600" y="118" fill="#fff" font-size="9" text-anchor="middle">UDP + DTLS + SRTP</text>
                            
                            <text x="600" y="180" fill="#ccc" font-size="10" text-anchor="middle">+ Opus FEC handles packet loss</text>
                            <text x="600" y="195" fill="#ccc" font-size="10" text-anchor="middle">+ Built-in echo cancellation</text>
                            <text x="600" y="210" fill="#ccc" font-size="10" text-anchor="middle">+ Adaptive bitrate/congestion</text>
                            <text x="600" y="225" fill="#ccc" font-size="10" text-anchor="middle">+ Detailed quality stats</text>
                            <text x="600" y="240" fill="#ccc" font-size="10" text-anchor="middle">+ Late packets can be dropped</text>
                        </svg>
                    </div>
                    
                    <div style="background: var(--accent-dim); padding: 16px; border-left: 3px solid var(--white); border-radius: 0 8px 8px 0;">
                        <p style="font-size: 12px; color: var(--gray-300); margin: 0; line-height: 1.7;">
                            <strong style="color: var(--white);">Bottom line:</strong> WebSockets are fine for prototyping, but for production client-server voice AI applications where latency matters, always use WebRTC. The echo cancellation, congestion control, and packet loss resilience are critical for real-world performance.
                        </p>
                    </div>
                </div>

                <!-- Section 9: Turn Detection -->
                <div id="guide-turn" class="model-detail-section" style="margin-bottom: 40px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px; border-bottom: 1px solid var(--border-subtle); padding-bottom: 12px;">9. Turn Detection & Interruption Handling</h3>
                    
                    <p style="font-size: 13px; line-height: 1.8; color: var(--gray-300); margin-bottom: 20px;">
                        Turn detection means determining when the user is finished talking and expects the LLM to respond. This is a non-trivial problemâ€”even humans don't always get it right, especially on audio calls without visual cues.
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 24px;">
                        <div style="padding: 20px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 12px;">Voice Activity Detection (VAD)</h4>
                            <p style="font-size: 12px; color: var(--gray-400); line-height: 1.7; margin-bottom: 12px;">Most common approach: assume a long pause means the user has finished speaking.</p>
                            <div style="font-size: 11px; font-family: 'IBM Plex Mono', monospace; background: var(--black); padding: 12px; border-radius: 4px;">
                                VAD_STOP_SECS = 0.8<br>
                                VAD_START_SECS = 0.2<br>
                                VAD_CONFIDENCE = 0.7<br>
                                VAD_MIN_VOLUME = 0.6
                            </div>
                        </div>
                        <div style="padding: 20px; background: var(--accent-dim); border: 1px solid var(--border-subtle); border-radius: 8px;">
                            <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 12px;">Context-Aware Turn Detection</h4>
                            <p style="font-size: 12px; color: var(--gray-400); line-height: 1.7; margin-bottom: 12px;">Uses LLM or specialized model to detect turn endings based on:</p>
                            <ul style="font-size: 11px; color: var(--gray-400); line-height: 1.8; padding-left: 16px;">
                                <li>Filler words like "um" indicating continued speech</li>
                                <li>Grammatical structure completion</li>
                                <li>Intonation and pronunciation patterns</li>
                                <li>Known patterns (e.g., phone numbers have specific lengths)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Interruption Handling -->
                    <div style="background: var(--black); padding: 20px; border: 1px solid var(--border-subtle); border-radius: 8px;">
                        <h4 style="font-size: 12px; font-weight: 600; margin-bottom: 16px; color: var(--white);">Interruption Handling Best Practices</h4>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                            <div>
                                <div style="font-size: 11px; font-weight: 600; margin-bottom: 6px;">Avoid Spurious Interruptions</div>
                                <ul style="font-size: 10px; color: var(--gray-400); line-height: 1.8; padding-left: 14px; margin: 0;">
                                    <li>Transient noises (coughs, keyboard)</li>
                                    <li>Echo cancellation failures</li>
                                    <li>Background speech (TV, radio)</li>
                                </ul>
                            </div>
                            <div>
                                <div style="font-size: 11px; font-weight: 600; margin-bottom: 6px;">Maintain Accurate Context</div>
                                <ul style="font-size: 10px; color: var(--gray-400); line-height: 1.8; padding-left: 14px; margin: 0;">
                                    <li>Use word-level timestamps from TTS</li>
                                    <li>Track what user actually heard</li>
                                    <li>Flush queued but unspoken text</li>
                                </ul>
                            </div>
                            <div>
                                <div style="font-size: 11px; font-weight: 600; margin-bottom: 6px;">Handle Function Calls</div>
                                <ul style="font-size: 10px; color: var(--gray-400); line-height: 1.8; padding-left: 14px; margin: 0;">
                                    <li>Insert placeholder responses</li>
                                    <li>Mark interrupted calls as CANCELLED</li>
                                    <li>Never leave dangling request messages</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Reference Card -->
                <div class="model-detail-section" style="margin-bottom: 40px; background: linear-gradient(135deg, var(--accent-dim) 0%, transparent 100%); padding: 24px; border-radius: 12px;">
                    <h3 style="font-size: 14px; margin-bottom: 20px; text-align: center;">Voice AI Quick Reference</h3>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; text-align: center;">
                        <div>
                            <div style="font-size: 28px; font-weight: 700; color: var(--white); font-family: 'IBM Plex Mono', monospace;">&lt;800ms</div>
                            <div style="font-size: 10px; color: var(--gray-500); text-transform: uppercase;">Target V2V Latency</div>
                        </div>
                        <div>
                            <div style="font-size: 28px; font-weight: 700; color: var(--white); font-family: 'IBM Plex Mono', monospace;">&lt;500ms</div>
                            <div style="font-size: 10px; color: var(--gray-500); text-transform: uppercase;">LLM TTFT Target</div>
                        </div>
                        <div>
                            <div style="font-size: 28px; font-weight: 700; color: var(--white); font-family: 'IBM Plex Mono', monospace;">$0.02-0.10</div>
                            <div style="font-size: 10px; color: var(--gray-500); text-transform: uppercase;">Cost per Minute</div>
                        </div>
                        <div>
                            <div style="font-size: 28px; font-weight: 700; color: var(--white); font-family: 'IBM Plex Mono', monospace;">WebRTC</div>
                            <div style="font-size: 10px; color: var(--gray-500); text-transform: uppercase;">Recommended Transport</div>
                        </div>
                    </div>
                </div>

                <!-- Attribution -->
                <div style="text-align: center; padding: 20px; color: var(--gray-600); font-size: 11px;">
                    <p>Content adapted from "Voice AI & Voice Agents: An Illustrated Primer" by Kwindla Hultman Kramer and the Pipecat community.</p>
                    <p style="margin-top: 8px;">Available under CC0 license. <a href="https://github.com/pipecat-ai/pipecat" style="color: var(--gray-500);">github.com/pipecat-ai/pipecat</a></p>
                </div>
            </div>
            </div><!-- End voice-guide-section -->
        </div><!-- End voice tab -->

        <!-- Chat Agent Calculator Tab - COMMENTED OUT
        <div id="chat-agent" class="tab-content">
            <div class="section-header">
                <h2>Chat Agent Calculator</h2>
                <p>Calculate costs for conversational AI agents with multiple turns and context management</p>
            </div>
            ...
        </div>
        -->

        <!-- Multi-Modal Calculator Tab - COMMENTED OUT
        <div id="multimodal" class="tab-content">
            <div class="section-header">
                <h2>Multi-Modal Calculator</h2>
                <p>Calculate costs for workflows combining text, images, audio, and video inputs</p>
            </div>
            ...
        </div>
        -->

        <!-- Documentation Tab -->
        <div id="documentation" class="tab-content">
            <div style="max-width: 1000px; margin: 0 auto;">
                <div class="section-header">
                    <h2>Documentation</h2>
                    <p>Complete formulas, calculations, and assumptions used in NAPIERS</p>
                </div>

                <!-- FORMULAS Section -->
                <div class="model-detail-section" style="margin-bottom: 30px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px;">FORMULAS</h3>
                    
                    <!-- Cost Calculation -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Cost Calculation</h4>
                        
                        <div style="margin-bottom: 16px;">
                            <h5 style="font-size: 11px; font-weight: 600; margin-bottom: 8px; color: var(--white);">Basic Token Cost</h5>
                            <div style="font-size: 11px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.8;">
                                Input Cost = Input Tokens (in billions) Ã— Input Price per 1B tokens<br>
                                Output Cost = Output Tokens (in billions) Ã— Output Price per 1B tokens<br>
                                Total Cost = Input Cost + Output Cost + Additional Costs
                            </div>
                            <div style="font-size: 10px; color: var(--white); margin-top: 8px;">
                                <strong>Price Conversion:</strong> $/billion = (cents_per_token Ã· 100) Ã— 1,000,000,000<br>
                                <strong>Example:</strong> GPT-4o mini input (0.000015 cents/token) = $150/billion = $0.15/million
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 16px;">
                            <h5 style="font-size: 11px; font-weight: 600; margin-bottom: 8px; color: var(--white);">Cache Costs</h5>
                            <div style="font-size: 11px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.8;">
                                Cache Read Cost = Cache Read Tokens (in billions) Ã— Cache Read Price per 1B tokens<br>
                                Cache Write Cost = Cache Write Tokens (in billions) Ã— Cache Write Price per 1B tokens
                            </div>
                        </div>
                        
                        <div>
                            <h5 style="font-size: 11px; font-weight: 600; margin-bottom: 8px; color: var(--white);">Additional Units</h5>
                            <div style="font-size: 11px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.8;">
                                Web Search Cost = Number of Searches Ã— (Web Search Price in cents) Ã· 100<br>
                                File Search Cost = Number of Searches Ã— (File Search Price in cents) Ã· 100<br>
                                Thinking Token Cost = Thinking Tokens (in billions) Ã— Thinking Token Price per 1B tokens
                            </div>
                        </div>
                    </div>
                    
                    <!-- Latency Calculation -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Latency Calculation</h4>
                        
                        <div style="margin-bottom: 16px;">
                            <h5 style="font-size: 11px; font-weight: 600; margin-bottom: 8px; color: var(--white);">Request Latency (Standard LLM)</h5>
                            <div style="font-size: 11px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.8;">
                                <strong>INPUT PROCESSING:</strong><br>
                                &nbsp;&nbsp;Input Speed = Output Speed Ã— 50 (parallelized)<br>
                                &nbsp;&nbsp;Input Time = (Input Tokens Ã· Input Speed) Ã— 1,000 ms<br><br>
                                <strong>OUTPUT PROCESSING:</strong><br>
                                &nbsp;&nbsp;Full Output Time = (Output Tokens Ã· Output Speed) Ã— 1,000 ms<br>
                                &nbsp;&nbsp;Streaming Mode: Perceived Latency = min(200ms, max(50ms, Full Ã— 0.1))<br>
                                &nbsp;&nbsp;Non-Streaming Mode: Perceived Latency = Full Output Time<br><br>
                                <strong>TOTAL LATENCY:</strong><br>
                                &nbsp;&nbsp;= Network Round Trip (2 Ã— Network Latency)<br>
                                &nbsp;&nbsp;+ Input Processing Time<br>
                                &nbsp;&nbsp;+ Output Perceived Latency
                            </div>
                        </div>
                        
                        <div>
                            <h5 style="font-size: 11px; font-weight: 600; margin-bottom: 8px; color: var(--white);">Time to First Token (TTFT)</h5>
                            <div style="font-size: 11px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.8;">
                                TTFT (Streaming) = Network Latency + Input Processing Time + 50ms<br>
                                TTFT (Non-Streaming) = Network Latency + Input Processing Time + Output Processing Time
                            </div>
                        </div>
                    </div>
                    
                    <!-- Chat Agent Formulas -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Chat Agent Formulas</h4>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                            <div style="background: var(--black); padding: 12px; border: 1px solid var(--white);">
                                <h5 style="font-size: 10px; font-weight: 600; margin-bottom: 8px;">Full Context Mode</h5>
                                <div style="font-size: 10px; font-family: monospace; line-height: 1.6;">
                                    Input = Sessions Ã— (Input/Turn Ã— Turns Ã— (Turns + 1) Ã· 2)<br>
                                    Output = Sessions Ã— (Output/Turn Ã— Turns)
                                </div>
                            </div>
                            <div style="background: var(--black); padding: 12px; border: 1px solid var(--white);">
                                <h5 style="font-size: 10px; font-weight: 600; margin-bottom: 8px;">Sliding Window Mode</h5>
                                <div style="font-size: 10px; font-family: monospace; line-height: 1.6;">
                                    Input = Sessions Ã— (Input/Turn Ã— Turns Ã— Window Size)<br>
                                    Output = Sessions Ã— (Output/Turn Ã— Turns)
                                </div>
                            </div>
                            <div style="background: var(--black); padding: 12px; border: 1px solid var(--white);">
                                <h5 style="font-size: 10px; font-weight: 600; margin-bottom: 8px;">Summary-Based Mode</h5>
                                <div style="font-size: 10px; font-family: monospace; line-height: 1.6;">
                                    Input = Sessions Ã— (Summary + Input/Turn) Ã— Turns<br>
                                    Output = Sessions Ã— (Output/Turn Ã— Turns)
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Multi-Modal Formulas -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Multi-Modal Formulas</h4>
                        
                        <div style="font-size: 11px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.8;">
                            <strong>Token Estimation:</strong><br>
                            Image Tokens = Number of Images Ã— (ResolutionÂ² Ã· 768)<br>
                            Audio Tokens = Audio Duration (seconds) Ã— 50<br>
                            Video Tokens = Video Duration (seconds) Ã— 200<br>
                            Total Input = Text Tokens + Image Tokens + Audio Tokens + Video Tokens
                        </div>
                    </div>
                    
                    <!-- Voice AI Formulas -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase;">Voice AI Formulas</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div>
                                <h5 style="font-size: 11px; font-weight: 600; margin-bottom: 8px; color: var(--white);">LLM Input Tokens (Sliding Window)</h5>
                                <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.6;">
                                    Tokens/Turn = (Words/Min Ã— Tokens/Word) Ã· Turns/Min<br>
                                    Total Turns = Turns/Min Ã— Conv Length<br>
                                    If Turns â‰¤ Window: Input = Tokens/Turn Ã— Turns Ã— (Turns + 1) Ã· 2<br>
                                    If Turns > Window: Input = Tokens/Turn Ã— (WindowÃ—(Window+1)Ã·2 + (Turns-Window)Ã—Window)
                                </div>
                            </div>
                            <div>
                                <h5 style="font-size: 11px; font-weight: 600; margin-bottom: 8px; color: var(--white);">LLM Output Tokens</h5>
                                <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.6;">
                                    Output Tokens = Words/Min Ã— Tokens/Word Ã— LLM Speech Ratio Ã— Conv Length
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 16px;">
                            <h5 style="font-size: 11px; font-weight: 600; margin-bottom: 8px; color: var(--white);">Voice AI Costs</h5>
                            <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.8;">
                                Transcription = Cost/Min Ã— Conv Length<br>
                                LLM = (Input Ã· 1B Ã— Input$/B) + (Output Ã· 1B Ã— Output$/B)<br>
                                TTS = $/Char Ã— Words/Min Ã— Chars/Word Ã— LLM Ratio Ã— Conv Length<br>
                                Hosting = (vCPU$/Min Ã— Conv Length) Ã· Agents/vCPU<br>
                                <strong>Total = Transcription + LLM + TTS + Hosting</strong>
                            </div>
                        </div>
                        
                        <div style="margin-top: 16px;">
                            <h5 style="font-size: 11px; font-weight: 600; margin-bottom: 8px; color: var(--white);">Voice-to-Voice Latency</h5>
                            <div style="font-size: 10px; font-family: monospace; background: var(--black); padding: 12px; border: 1px solid var(--white); line-height: 1.8;">
                                Input Path (114ms) = Mic + Opus Enc + Network + Packet + Jitter + Opus Dec<br>
                                AI Processing = STT (200-450ms) + LLM (varies) + Aggregation (10ms) + TTS (80-200ms)<br>
                                Output Path (89ms) = Opus Enc + Packet + Network + Jitter + Opus Dec + Speaker<br>
                                <strong>Total = 114ms + AI Processing + 89ms</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ASSUMPTIONS Section -->
                <div class="model-detail-section" style="margin-bottom: 30px;">
                    <h3 style="font-size: 16px; margin-bottom: 20px;">ASSUMPTIONS</h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
                        <div style="border: 1px solid var(--white); padding: 20px;">
                            <h4 style="font-size: 12px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">Pricing</h4>
                            <div style="font-size: 11px; line-height: 2; color: var(--white);">
                                <div>â€¢ Prices in USD, pay-as-you-go</div>
                                <div>â€¢ Database stores cents/token, displays as $/billion</div>
                                <div>â€¢ No volume discounts included</div>
                            </div>
                        </div>
                        <div style="border: 1px solid var(--white); padding: 20px;">
                            <h4 style="font-size: 12px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">Latency</h4>
                            <div style="font-size: 11px; line-height: 2; color: var(--white);">
                                <div>â€¢ Network: 50ms (100ms round-trip)</div>
                                <div>â€¢ Output speed: 100 tok/s default</div>
                                <div>â€¢ Input speed: 50Ã— output (parallelized)</div>
                                <div>â€¢ Streaming: min(200, max(50, fullÃ—0.1)) ms</div>
                            </div>
                        </div>
                        <div style="border: 1px solid var(--white); padding: 20px;">
                            <h4 style="font-size: 12px; font-weight: 600; margin-bottom: 12px; text-transform: uppercase;">Voice AI Defaults</h4>
                            <div style="font-size: 11px; line-height: 2; color: var(--white);">
                                <div>â€¢ 100 WPM â€¢ 1.3 tok/word â€¢ 6 chars/word</div>
                                <div>â€¢ 4 turns/min â€¢ 0.5 LLM ratio</div>
                                <div>â€¢ 10 turn context window</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- GLOSSARY Section -->
                <div class="model-detail-section">
                    <h3 style="font-size: 16px; margin-bottom: 20px;">GLOSSARY</h3>
                    
                    <!-- Token & Pricing Terms -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase; border-bottom: 1px solid var(--white); padding-bottom: 8px;">Token & Pricing Terms</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 11px;">
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Token</div>
                                <div style="color: var(--white); line-height: 1.6;">A unit of text that LLMs process. Roughly 4 characters or 0.75 words in English. "Hello world" â‰ˆ 2 tokens.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Input Tokens (Request Tokens)</div>
                                <div style="color: var(--white); line-height: 1.6;">Tokens sent TO the model. Includes your prompt, system message, and conversation history.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Output Tokens (Response Tokens)</div>
                                <div style="color: var(--white); line-height: 1.6;">Tokens generated BY the model. The AI's response. Usually 2-4Ã— more expensive than input.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Context Window</div>
                                <div style="color: var(--white); line-height: 1.6;">Maximum tokens a model can process in one request (input + output combined). GPT-4o: 128K, Claude 3.5: 200K.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Cache Tokens</div>
                                <div style="color: var(--white); line-height: 1.6;">Tokens stored for reuse. Cache Read: using cached context (cheaper). Cache Write: saving to cache (costs extra).</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Thinking Tokens</div>
                                <div style="color: var(--white); line-height: 1.6;">Internal reasoning tokens (o1, Claude thinking). Model "thinks" before responding. Billed separately.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">$/1B Tokens</div>
                                <div style="color: var(--white); line-height: 1.6;">Price per billion tokens. 1B = 1,000,000,000. $150/1B = $0.15/1M = $0.00015/1K tokens.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Pay-As-You-Go (PAYG)</div>
                                <div style="color: var(--white); line-height: 1.6;">Standard pricing model. Pay only for tokens used, no commitments. Prices shown here are PAYG.</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Latency Terms -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase; border-bottom: 1px solid var(--white); padding-bottom: 8px;">Latency & Performance Terms</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 11px;">
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Latency</div>
                                <div style="color: var(--white); line-height: 1.6;">Total time from request sent to response received. Includes network, processing, and generation time.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">TTFB (Time to First Byte)</div>
                                <div style="color: var(--white); line-height: 1.6;">Time until first token arrives. Critical for streaming. Good TTFB: &lt;500ms.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">TTFT (Time to First Token)</div>
                                <div style="color: var(--white); line-height: 1.6;">Same as TTFB. Time until model starts generating output. Affected by input size and model speed.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Streaming</div>
                                <div style="color: var(--white); line-height: 1.6;">Receiving tokens as they're generated instead of waiting for full response. Reduces perceived latency.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Tokens/Second (tok/s)</div>
                                <div style="color: var(--white); line-height: 1.6;">Generation speed. Fast models: 100-150 tok/s. Slow models: 30-50 tok/s. Affects output latency.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Network Latency</div>
                                <div style="color: var(--white); line-height: 1.6;">Time for data to travel between you and API server. Typical: 20-100ms one-way depending on region.</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Model Types -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase; border-bottom: 1px solid var(--white); padding-bottom: 8px;">Model Types & Features</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 11px;">
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">LLM (Large Language Model)</div>
                                <div style="color: var(--white); line-height: 1.6;">AI model trained on text to generate human-like responses. GPT-4, Claude, Gemini, Llama are LLMs.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Chat Model</div>
                                <div style="color: var(--white); line-height: 1.6;">LLM fine-tuned for conversation. Supports system prompts, user/assistant turns, and chat history.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Embedding Model</div>
                                <div style="color: var(--white); line-height: 1.6;">Converts text to numerical vectors for similarity search, RAG, and semantic matching. Much cheaper than chat.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Multi-Modal</div>
                                <div style="color: var(--white); line-height: 1.6;">Models that process multiple input types: text, images, audio, video. GPT-4V, Claude 3, Gemini Pro Vision.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Function Calling / Tools</div>
                                <div style="color: var(--white); line-height: 1.6;">Model can call external functions/APIs. Returns structured JSON to trigger actions in your code.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">JSON Mode</div>
                                <div style="color: var(--white); line-height: 1.6;">Forces model to output valid JSON. Useful for structured data extraction and API responses.</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Voice AI Terms -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase; border-bottom: 1px solid var(--white); padding-bottom: 8px;">Voice AI Terms</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 11px;">
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">STT (Speech-to-Text)</div>
                                <div style="color: var(--white); line-height: 1.6;">Converts spoken audio to text. Also called ASR (Automatic Speech Recognition). Whisper, Deepgram Nova.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">TTS (Text-to-Speech)</div>
                                <div style="color: var(--white); line-height: 1.6;">Converts text to spoken audio. Creates AI voice output. ElevenLabs, OpenAI TTS, Google WaveNet.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Voice-to-Voice Latency</div>
                                <div style="color: var(--white); line-height: 1.6;">Total time from user speaking to AI voice response. Target: &lt;800ms for natural conversation.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">WPM (Words Per Minute)</div>
                                <div style="color: var(--white); line-height: 1.6;">Speaking rate. Conversational: 100-120 WPM. Fast: 150+ WPM. Slow/careful: 80-100 WPM.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Turn</div>
                                <div style="color: var(--white); line-height: 1.6;">One exchange in conversation. User speaks â†’ AI responds = 1 turn. Typical: 4-6 turns/minute.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Diarization</div>
                                <div style="color: var(--white); line-height: 1.6;">Identifying who spoke when in audio with multiple speakers. "Speaker 1 said X, Speaker 2 said Y."</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">VAD (Voice Activity Detection)</div>
                                <div style="color: var(--white); line-height: 1.6;">Classifies audio as "speech" or "not speech". Used for turn detection. Silero VAD is most common.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Echo Cancellation</div>
                                <div style="color: var(--white); line-height: 1.6;">Prevents speaker audio from feeding back into mic. Critical for speakerphone use. Must run on-device.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Jitter Buffer</div>
                                <div style="color: var(--white); line-height: 1.6;">Buffers incoming packets to smooth out arrival time variations. Adds ~40ms latency but prevents glitches.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Speaker Isolation</div>
                                <div style="color: var(--white); line-height: 1.6;">Suppresses background speech from non-primary speakers. Krisp offers the best model. Improves transcription.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Opus Codec</div>
                                <div style="color: var(--white); line-height: 1.6;">Audio codec for WebRTC. 32kbps for voice, excellent quality. Has forward error correction for packet loss.</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advanced Voice AI Concepts -->
                    <div style="border: 1px solid var(--white); padding: 20px; margin-bottom: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase; border-bottom: 1px solid var(--white); padding-bottom: 8px;">Advanced Voice AI Concepts</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 11px;">
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Speech-to-Speech Models</div>
                                <div style="color: var(--white); line-height: 1.6;">LLMs that process audio directly, skipping STT/TTS. OpenAI Realtime API, Gemini Multimodal Live. More natural but higher latency for long conversations due to audio token costs.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Context-Aware Turn Detection</div>
                                <div style="color: var(--white); line-height: 1.6;">Uses LLM or specialized model instead of simple VAD. Understands grammar, filler words, intonation. OpenAI's "semantic VAD" and Pipecat's "Smart Turn" model.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Word-Level Timestamps</div>
                                <div style="color: var(--white); line-height: 1.6;">TTS returns timing for each word. Critical for knowing what user heard after interruption. Cartesia, Deepgram, and Rime support this.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Pipecat Framework</div>
                                <div style="color: var(--white); line-height: 1.6;">Open-source voice AI framework with 60+ model integrations. Handles turn detection, interruptions, context management. Used by NVIDIA, Google, AWS, OpenAI.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Edge Routing</div>
                                <div style="color: var(--white); line-height: 1.6;">Connect users to nearest edge server, then private routes to inference. Reduces P95 latency significantly vs public internet routes.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Function Calling in Voice</div>
                                <div style="color: var(--white); line-height: 1.6;">Voice agents rely heavily on function calling. Adds latency (2x inference). Handle with "Please wait..." messages for long-running functions.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">DTMF Tones</div>
                                <div style="color: var(--white); line-height: 1.6;">Keypress sounds for phone menus. Voice agents need to send DTMF to interact with legacy phone systems. Define functions that send specific tones.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Warm Transfer</div>
                                <div style="color: var(--white); line-height: 1.6;">Agent talks to human caller, puts them on hold, briefs the human agent, then connects them. Voice AI can do warm transfers just like humans.</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Architecture Terms -->
                    <div style="border: 1px solid var(--white); padding: 20px;">
                        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 16px; text-transform: uppercase; border-bottom: 1px solid var(--white); padding-bottom: 8px;">Architecture & Context Terms</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 11px;">
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Sliding Window</div>
                                <div style="color: var(--white); line-height: 1.6;">Keeps only last N turns in context to limit token growth. Older messages dropped. Prevents quadratic cost growth.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Full Context</div>
                                <div style="color: var(--white); line-height: 1.6;">All previous turns included. Costs grow quadratically: turn 10 sends all 9 previous turns. Expensive for long chats.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">RAG (Retrieval Augmented Generation)</div>
                                <div style="color: var(--white); line-height: 1.6;">Fetch relevant documents and include in prompt. Grounds model responses in your data. Uses embeddings + vector DB.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">System Prompt</div>
                                <div style="color: var(--white); line-height: 1.6;">Instructions that define AI behavior. "You are a helpful assistant..." Sent with every request, adds to input tokens.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Prompt Engineering</div>
                                <div style="color: var(--white); line-height: 1.6;">Crafting effective prompts to get desired outputs. Includes few-shot examples, chain-of-thought, formatting.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Fine-Tuning</div>
                                <div style="color: var(--white); line-height: 1.6;">Training a model on your specific data. Creates custom model. Higher upfront cost, lower per-token cost.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Provider</div>
                                <div style="color: var(--white); line-height: 1.6;">Company hosting the model API. OpenAI, Anthropic, Google, AWS Bedrock, Azure, Together AI, Groq, etc.</div>
                            </div>
                            <div style="padding: 12px; background: var(--black); border: 1px solid var(--white);">
                                <div style="font-weight: 700; margin-bottom: 6px; color: var(--white);">Inference</div>
                                <div style="color: var(--white); line-height: 1.6;">Running a trained model to generate output. "Inference costs" = API costs. Contrast with training costs.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Model Detail Modal -->
        <div id="modelDetailModal" class="model-detail hidden">
            <div class="model-detail-header">
                <div>
                    <h2 id="detailModelName" style="font-size: 20px; margin-bottom: 4px;"></h2>
                    <p id="detailProvider" style="color: var(--white); font-size: 12px;"></p>
                </div>
                <button class="btn" onclick="closeModelDetail()">Close</button>
            </div>
            <div id="modelDetailContent"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
